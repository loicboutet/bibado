<% content_for :title, "Video Guides - Bibado" %>

<div class="px-4 py-4">
  <h1 class="text-xl font-bold text-[#2C3E50] mb-4">Video Guides</h1>
  
  <!-- Categories -->
  <div class="grid grid-cols-2 gap-3 mb-6">
    <% @categories.each do |cat| %>
      <%= link_to cat[:id] == 'sensory_science' ? sensory_science_mockups_guides_path : 
                  cat[:id] == 'feeding_therapy' ? feeding_therapy_mockups_guides_path :
                  cat[:id] == 'developmental_dining' ? developmental_dining_mockups_guides_path : '#',
          class: "block bg-white rounded-xl shadow-sm border border-gray-100 p-4 hover:shadow-md transition-shadow" do %>
        <div class="w-10 h-10 rounded-full flex items-center justify-center mb-2" style="background-color: <%= cat[:color] %>20">
          <span class="text-xl"><%= cat[:icon] %></span>
        </div>
        <p class="font-medium text-[#2C3E50] text-sm"><%= cat[:name] %></p>
        <p class="text-xs text-gray-500"><%= @guides.select { |g| g[:category] == cat[:id] }.count %> videos</p>
      <% end %>
    <% end %>
  </div>
  
  <!-- All Videos -->
  <h2 class="font-semibold text-[#2C3E50] mb-3">All Videos</h2>
  <div class="space-y-3">
    <% @guides.each do |guide| %>
      <%= link_to mockups_guide_path(guide[:id]), class: "block" do %>
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow">
          <div class="flex">
            <div class="w-32 h-24 bg-gradient-to-br from-[#4ECDC4] to-[#3DB9B0] flex items-center justify-center relative">
              <span class="text-3xl"><%= guide[:thumbnail] %></span>
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="w-10 h-10 bg-white/30 rounded-full flex items-center justify-center">
                  <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M8 5v14l11-7z"/>
                  </svg>
                </div>
              </div>
              <span class="absolute bottom-1 right-1 bg-black/70 text-white text-xs px-1 rounded"><%= guide[:duration] %>:00</span>
            </div>
            <div class="flex-1 p-3">
              <p class="font-medium text-[#2C3E50] text-sm line-clamp-2"><%= guide[:title] %></p>
              <p class="text-xs text-gray-500 mt-1 line-clamp-2"><%= guide[:description] %></p>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
